<div class="row">
	<div class="col">
		<h5 class="card-title">Nuevo Accesorio</h5>
		<h6 class="card-subtitle">Escriba la informaciÃ³n del accesorio</h6>
		<div class="card">
			<div class="card-body">
				<h5 class="sub-title">InformaciÃ³n de la factura:</h5>

				<div class="row" [formGroup]="group">
					<div class="col-12">
						<div class="form-group row mobile-inputs">
							<div class="col-12 col-sm-4">
								<label class="col-form-label">Id. Orden:</label>
								<div class="input-group ">
									<input type="text" class="form-control form-control-primary" id="loadorderid"
										placeholder="# de la orden" (change)="loadorderid()"
										formControlName="loadorderid" list="loadorderdata" size="10"
										autocomplete="off" />
									<div class="input-group-append">
										<button type="button" class="btn btn-outline-secondary"
											(click)="group.reset()">ðŸ—‘</button>
									</div>
								</div>
							</div>
							<div class="col-12 col-sm-4">
								<label class="col-form-label">Id. Carga:</label>
								<div class="input-group ">
									<input type="text" class="form-control form-control-default"
										placeholder="# de la carga" formControlName="loadid" list="loaddata"
										(change)="loadid()" size="10" autocomplete="off" />
									<div class="input-group-append">
										<button type="button" class="btn btn-outline-secondary"
											(click)="group.reset()">ðŸ—‘</button>
									</div>
								</div>
							</div>
							<div class="col-12 col-sm-4">
								<label class="col-form-label">Id. EnvÃ­o:</label>
								<div class="input-group ">
									<input type="text" class="form-control" placeholder="# EnvÃ­o"
										formControlName="deliveryid" list="deliverydata" (change)="deliveryid()"
										size="10" autocomplete="off" />
									<div class="input-group-append">
										<button type="button" class="btn btn-outline-secondary"
											(click)="group.reset()">ðŸ—‘</button>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>


				<div *ngIf="group.valid">
					<hr>
					<div class="row" [formGroup]="accessory">
						<div class="col">
							<h5 class="sub-title">InformaciÃ³n del accesorio:</h5>
							<div class="row mobile-inputs">
								<div class="col-6 col-sm-4">
									<label class="col-form-label">Tipo:</label>
									<div class="ml-auto">
										<select class="custom-select form-control" formControlName="accessorytype">
											<option selected disabled value>-- SIN SELECCIÃ“N --</option>
											<option selected blankoption *ngFor="let bundle of bundleSrv.accessoryTypes"
												[value]="bundle.table_code">{{bundle.descripcion}}</option>
										</select>
									</div>
								</div>
								<div class="col-6 col-sm-4">
									<label class="col-form-label">Sobre costo:</label>
									<input type="currency" class="form-control" placeholder="Sobre costo"
										formControlName="costoverrun">
								</div>
								<div class="col-6 col-sm-4">
									<label class="col-form-label">Unidad de venta:</label>
									<select class="custom-select form-control" formControlName="salesunit">
										<option selected disabled value>-- SIN SELECCIÃ“N --</option>
										<option selected blankoption *ngFor="let bundle of bundleSrv.accessoryTypes"
											[value]="bundle.table_code">{{bundle.descripcion}}</option>
									</select>
								</div>
								<div class="col-6 col-sm-4">
									<label class="col-form-label">Cantidad:</label>
									<input type="number" class="form-control" placeholder="Cantidad"
										formControlName="quantity">
								</div>
								<div class="col-4 col-sm-4">
									<label class="col-form-label">Fecha registro:</label>
									<input class="form-control" placeholder="Fecha rechazo" type="datetime-local"
										formControlName="requestdate">
								</div>
								<div class="col-4 col-sm-4" [class.has-success]="accessory?.controls?.comentario?.valid!"
									[class.has-danger]="accessory?.controls?.comentario?.invalid!">
									<label class="col-form-label">Comentario:</label>
									<textarea class="form-control" rows="1" formControlName="comentario"></textarea>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div *ngIf="messages && !group?.valid || !reject?.valid">
					<pre>
						<ngb-alert *ngFor="let message of messages" [type]="message.level" [dismissible]="message.dismissible">{{message.message}}</ngb-alert>
					</pre>
				</div>
				<ng-container *ngIf="group.dirty || accessory.dirty">
					<hr>
					<button *ngIf="!messages && group.valid && accessory.valid"
						class="btn btn-sm btn-outline-{{ accessory.controls.comment.disabled ? 'danger' : 'success'}}">
						{{ accessory.valid ? "Guardar" : "Actualizar" }}
					</button>
					<button class="btn btn-sm btn-outline-primary" *ngIf="group.dirty || accessory.dirty"
						(click)="group.reset();accessory.reset()">Limpiar</button>
				</ng-container>
			</div>
		</div>
	</div>
</div>

<datalist id="loadorderdata">
	<option *ngFor="let p of planning" [value]="p.loadorderid">{{p.loadorderid}}</option>
</datalist>

<datalist id="loaddata">
	<option *ngFor="let p of planningdatabyloadid()" [value]="p">{{p}}</option>
</datalist>
<datalist id="deliverydata">
	<option *ngFor="let p of deliverdatabyloadid()" [value]="p.deliveryid">{{p.deliveryid}}</option>
</datalist>